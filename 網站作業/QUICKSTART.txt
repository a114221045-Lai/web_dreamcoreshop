"""
╔═══════════════════════════════════════════════════════════════════════════╗
║                                                                           ║
║    🚀 AI 客服系統 - Vercel 部署快速開始指南                                ║
║                                                                           ║
║    夢核物品販賣部 × OpenRouter API                                        ║
║                                                                           ║
╚═══════════════════════════════════════════════════════════════════════════╝
"""

# ═══════════════════════════════════════════════════════════════════════════
# 📋 3 分鐘快速開始
# ═══════════════════════════════════════════════════════════════════════════

## 步驟 1️⃣ : 本地準備 (1 分鐘)

# 打開終端，進入項目目錄
cd 網站作業

# 安裝依賴
npm install

# 複製環境配置
cp .env.example .env

# 編輯 .env，填入 API Key
# OPENROUTER_API_KEY=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

## 步驟 2️⃣ : 本地測試 (1 分鐘)

# 啟動服務
npm start

# 打開瀏覽器訪問測試頁面
# http://localhost:3000/online-test.html

## 步驟 3️⃣ : 部署到 Vercel (1 分鐘)

# 安裝 Vercel CLI
npm install -g vercel

# 登入 Vercel
vercel login

# 部署
vercel deploy --prod

# ═══════════════════════════════════════════════════════════════════════════
# 🎯 部署後需要做的事
# ═══════════════════════════════════════════════════════════════════════════

1. 訪問 Vercel Dashboard: https://vercel.com/dashboard

2. 選擇您的項目

3. 進入 Settings → Environment Variables

4. 添加以下環境變數:
   
   ✓ OPENROUTER_API_KEY=sk-or-v1-...
   ✓ OPENROUTER_MODEL=google/gemma-3-27b-it:free
   ✓ OPENROUTER_SYSTEM_PROMPT=你是一個夢核物品販賣部的AI客服助理...

5. 點擊保存 (會自動重新部署)

6. 訪問您的線上應用: https://your-project.vercel.app/online-test.html

# ═══════════════════════════════════════════════════════════════════════════
# 🧪 驗證部署
# ═══════════════════════════════════════════════════════════════════════════

訪問以下 URL 進行驗證：

✅ 主應用: https://your-project.vercel.app
✅ 線上測試: https://your-project.vercel.app/online-test.html
✅ 健康檢查: https://your-project.vercel.app/api/health

# ═══════════════════════════════════════════════════════════════════════════
# 📚 文檔導航
# ═══════════════════════════════════════════════════════════════════════════

┌─────────────────────────────────────────────────────────────────────────┐
│ 需要什麼？                  │ 查看文檔                                  │
├─────────────────────────────────────────────────────────────────────────┤
│ 完成總結                    │ COMPLETION_SUMMARY.md                     │
│ 快速參考                    │ README_DEPLOYMENT.md                      │
│ 完整部署指南                │ DEPLOYMENT_GUIDE.md (500+ 行)             │
│ 問題診斷                    │ DIAGNOSTIC_GUIDE.md                       │
│ 文件索引                    │ FILE_INDEX.md                             │
│ 本快速開始                  │ QUICKSTART.txt (本文件)                  │
└─────────────────────────────────────────────────────────────────────────┘

# ═══════════════════════════════════════════════════════════════════════════
# 🆘 遇到問題？
# ═══════════════════════════════════════════════════════════════════════════

❌ "無法連接到後端"
→ 檢查 vercel.json 路由配置
→ 查看 DEPLOYMENT_GUIDE.md#問題-1

❌ "API 金鑰認證失敗"
→ 確認 Vercel 環境變數設置正確
→ 查看 DEPLOYMENT_GUIDE.md#問題-2

❌ "JSON 解析錯誤"
→ 訪問 /debug-test.html 進行診斷
→ 查看 DIAGNOSTIC_GUIDE.md

❌ "502 Bad Gateway"
→ 查看 Vercel 日誌: vercel logs your-project --tail
→ 查看 DEPLOYMENT_GUIDE.md#問題-4

# ═══════════════════════════════════════════════════════════════════════════
# 🔑 重要提醒
# ═══════════════════════════════════════════════════════════════════════════

⚠️  不要在 Git 中提交 .env 文件 (已在 .gitignore 中)
⚠️  不要硬編碼 API Key 到代碼中
⚠️  只在 Vercel 環境變數中存儲敏感信息
⚠️  定期檢查 OpenRouter 的 API 使用情況

# ═══════════════════════════════════════════════════════════════════════════
# 📊 項目結構速查
# ═══════════════════════════════════════════════════════════════════════════

網站作業/
├── backend/
│   ├── server.js              # Express 後端
│   └── ORAPI.js               # OpenRouter 封裝
├── index.html                 # 主頁
├── script.js                  # 前端邏輯
├── online-test.html           # ✨ 推薦使用的測試頁
├── debug-test.html            # 診斷工具
├── package.json               # npm 配置
├── vercel.json                # Vercel 配置
├── .env                       # 本地環境變數
├── .env.example               # 環境變數示例
└── 文檔/
    ├── COMPLETION_SUMMARY.md  # 完成總結
    ├── README_DEPLOYMENT.md   # 快速參考
    ├── DEPLOYMENT_GUIDE.md    # 完整指南
    ├── DIAGNOSTIC_GUIDE.md    # 問題診斷
    ├── FILE_INDEX.md          # 文件索引
    └── QUICKSTART.txt         # 本文件

# ═══════════════════════════════════════════════════════════════════════════
# 🌐 API 端點參考
# ═══════════════════════════════════════════════════════════════════════════

健康檢查:
  GET /api/health
  → 檢查後端是否運行

聊天接口:
  POST /api/chat
  請求體: {"messages": [{"role": "user", "content": "..."}]}
  → 發送聊天訊息並獲取 AI 回應

聯絡表單:
  POST /api/contact
  請求體: {"name": "...", "email": "...", "message": "..."}
  → 提交聯絡信息

# ═══════════════════════════════════════════════════════════════════════════
# ✅ 部署檢查清單
# ═══════════════════════════════════════════════════════════════════════════

部署前:
  [ ] npm install 完成
  [ ] .env 文件已配置 API Key
  [ ] npm start 本地測試成功
  [ ] 訪問 http://localhost:3000/online-test.html 驗證
  [ ] Git 已提交更改

部署中:
  [ ] vercel deploy --prod 成功
  [ ] 項目 URL 已獲得

部署後:
  [ ] 在 Vercel 中設置環境變數
  [ ] 訪問線上應用驗證
  [ ] 檢查 /api/health 端點
  [ ] 測試聊天功能

# ═══════════════════════════════════════════════════════════════════════════
# 🎨 線上測試頁面功能
# ═══════════════════════════════════════════════════════════════════════════

訪問: https://your-project.vercel.app/online-test.html

功能:
  📊 系統狀態面板 - 即時連接狀態
  🔄 快速測試 - 一鍵執行診斷
  💬 聊天演示 - 實時聊天測試
  📋 詳細日誌 - 所有操作記錄

# ═══════════════════════════════════════════════════════════════════════════
# 🚀 下一步
# ═══════════════════════════════════════════════════════════════════════════

現在您已經準備好部署了！

選擇一個操作：

1️⃣ 立即部署: vercel deploy --prod

2️⃣ 了解更多: 閱讀 DEPLOYMENT_GUIDE.md

3️⃣ 解決問題: 訪問 /online-test.html 進行診斷

4️⃣ 查看文檔: 開啟 FILE_INDEX.md

# ═══════════════════════════════════════════════════════════════════════════

祝部署順利！🎉

有任何問題，請參考相關文檔或使用診斷工具。

更新日期: 2025年12月18日
"""
